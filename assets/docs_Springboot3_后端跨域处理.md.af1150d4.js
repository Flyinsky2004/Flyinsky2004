import{_ as s,o as n,c as a,Q as o}from"./chunks/framework.dc2d320f.js";const l="/assets/corserror.ca64a375.png",d=JSON.parse('{"title":"Springboot后端跨域处理","description":"","frontmatter":{"date":"2023-11-15T18:57:00.000Z","author":"Flyinsky","tags":["java","Springboot"],"categories":["java"]},"headers":[],"relativePath":"docs/Springboot3/后端跨域处理.md","filePath":"docs/Springboot3/后端跨域处理.md","lastUpdated":null}'),p={name:"docs/Springboot3/后端跨域处理.md"},e=o('<h1 id="springboot后端跨域处理" tabindex="-1">Springboot后端跨域处理 <a class="header-anchor" href="#springboot后端跨域处理" aria-label="Permalink to &quot;Springboot后端跨域处理&quot;">​</a></h1><div class="tip custom-block"><p class="custom-block-title">问题背景</p><p>在例如Vue3+Springboot3前后端分离的项目中在未配置跨域拦截器的情况下前端直接访问后端接口则会直接报错。</p><p><img src="'+l+`" alt=""></p></div><p>若没有使用SpringSecurity安全框架:</p><p>包目录下创建Config/CorsConfig.java</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-darker vp-code-dark"><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Configuration</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#EEFFFF;"> </span><span style="color:#C792EA;">class</span><span style="color:#EEFFFF;"> </span><span style="color:#FFCB6B;">CorsConfig</span><span style="color:#EEFFFF;"> </span><span style="color:#C792EA;">implements</span><span style="color:#EEFFFF;"> </span><span style="color:#FFCB6B;">WebMvcConfigurer</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#EEFFFF;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#EEFFFF;">    </span><span style="color:#C792EA;">public</span><span style="color:#EEFFFF;"> </span><span style="color:#C792EA;">void</span><span style="color:#EEFFFF;"> </span><span style="color:#82AAFF;">addCorsMappings</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">CorsRegistry</span><span style="color:#EEFFFF;"> </span><span style="color:#EEFFFF;font-style:italic;">registry</span><span style="color:#89DDFF;">)</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#EEFFFF;">        registry</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addMapping</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/**</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#545454;font-style:italic;">//项目中的所有接口都支持跨域</span></span>
<span class="line"><span style="color:#EEFFFF;">                </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">allowedOriginPatterns</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">*</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#545454;font-style:italic;">//所有地址都可以访问，也可以配置具体地址</span></span>
<span class="line"><span style="color:#EEFFFF;">                </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">allowCredentials</span><span style="color:#89DDFF;">(true)</span></span>
<span class="line"><span style="color:#EEFFFF;">                </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">allowedMethods</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">*</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#545454;font-style:italic;">//&quot;GET&quot;, &quot;HEAD&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;OPTIONS&quot;</span></span>
<span class="line"><span style="color:#EEFFFF;">                </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">maxAge</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">3600</span><span style="color:#89DDFF;">);</span><span style="color:#545454;font-style:italic;">// 跨域允许时间</span></span>
<span class="line"><span style="color:#EEFFFF;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">@</span><span style="color:#267F99;">Configuration</span></span>
<span class="line"><span style="color:#0000FF;">public</span><span style="color:#000000;"> </span><span style="color:#0000FF;">class</span><span style="color:#000000;"> </span><span style="color:#267F99;">CorsConfig</span><span style="color:#000000;"> </span><span style="color:#0000FF;">implements</span><span style="color:#000000;"> </span><span style="color:#267F99;">WebMvcConfigurer</span><span style="color:#000000;"> {</span></span>
<span class="line"><span style="color:#000000;">    @</span><span style="color:#267F99;">Override</span></span>
<span class="line"><span style="color:#000000;">    </span><span style="color:#0000FF;">public</span><span style="color:#000000;"> </span><span style="color:#267F99;">void</span><span style="color:#000000;"> </span><span style="color:#795E26;">addCorsMappings</span><span style="color:#000000;">(</span><span style="color:#267F99;">CorsRegistry</span><span style="color:#000000;"> </span><span style="color:#001080;">registry</span><span style="color:#000000;">) {</span></span>
<span class="line"><span style="color:#000000;">        </span><span style="color:#001080;">registry</span><span style="color:#000000;">.</span><span style="color:#795E26;">addMapping</span><span style="color:#000000;">(</span><span style="color:#A31515;">&quot;/**&quot;</span><span style="color:#000000;">)</span><span style="color:#008000;">//项目中的所有接口都支持跨域</span></span>
<span class="line"><span style="color:#000000;">                .</span><span style="color:#795E26;">allowedOriginPatterns</span><span style="color:#000000;">(</span><span style="color:#A31515;">&quot;*&quot;</span><span style="color:#000000;">)</span><span style="color:#008000;">//所有地址都可以访问，也可以配置具体地址</span></span>
<span class="line"><span style="color:#000000;">                .</span><span style="color:#795E26;">allowCredentials</span><span style="color:#000000;">(</span><span style="color:#0000FF;">true</span><span style="color:#000000;">)</span></span>
<span class="line"><span style="color:#000000;">                .</span><span style="color:#795E26;">allowedMethods</span><span style="color:#000000;">(</span><span style="color:#A31515;">&quot;*&quot;</span><span style="color:#000000;">)</span><span style="color:#008000;">//&quot;GET&quot;, &quot;HEAD&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;OPTIONS&quot;</span></span>
<span class="line"><span style="color:#000000;">                .</span><span style="color:#795E26;">maxAge</span><span style="color:#000000;">(</span><span style="color:#098658;">3600</span><span style="color:#000000;">);</span><span style="color:#008000;">// 跨域允许时间</span></span>
<span class="line"><span style="color:#000000;">    }</span></span>
<span class="line"><span style="color:#000000;">}</span></span></code></pre></div><p>若使用了SpringSecurity安全框架：</p><p>包目录下创建Config/CorsConfig.java</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-darker vp-code-dark"><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Configuration</span></span>
<span class="line"><span style="color:#C792EA;">public</span><span style="color:#EEFFFF;"> </span><span style="color:#C792EA;">class</span><span style="color:#EEFFFF;"> </span><span style="color:#FFCB6B;">CorsConfig</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#EEFFFF;">    </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Bean</span></span>
<span class="line"><span style="color:#EEFFFF;">    </span><span style="color:#C792EA;">public</span><span style="color:#EEFFFF;"> </span><span style="color:#C792EA;">WebMvcConfigurer</span><span style="color:#EEFFFF;"> </span><span style="color:#82AAFF;">corsConfigurer</span><span style="color:#89DDFF;">()</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#EEFFFF;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#EEFFFF;"> </span><span style="color:#82AAFF;">WebMvcConfigurer</span><span style="color:#89DDFF;">()</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#EEFFFF;">            </span><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Override</span></span>
<span class="line"><span style="color:#EEFFFF;">            </span><span style="color:#C792EA;">public</span><span style="color:#EEFFFF;"> </span><span style="color:#C792EA;">void</span><span style="color:#EEFFFF;"> </span><span style="color:#82AAFF;">addCorsMappings</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">CorsRegistry</span><span style="color:#EEFFFF;"> </span><span style="color:#EEFFFF;font-style:italic;">registry</span><span style="color:#89DDFF;">)</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#EEFFFF;">                registry</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addMapping</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#EEFFFF;">                        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">allowedOrigins</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://175.24.164.155</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#EEFFFF;">                        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">allowedOrigins</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://localhost:5173</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#EEFFFF;">                        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">allowedMethods</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">GET</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">POST</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">PUT</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">DELETE</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#EEFFFF;">                        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">allowCredentials</span><span style="color:#89DDFF;">(true)</span></span>
<span class="line"><span style="color:#EEFFFF;">                        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">maxAge</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">3600</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#EEFFFF;">            </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#EEFFFF;">        </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#EEFFFF;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">@</span><span style="color:#267F99;">Configuration</span></span>
<span class="line"><span style="color:#0000FF;">public</span><span style="color:#000000;"> </span><span style="color:#0000FF;">class</span><span style="color:#000000;"> </span><span style="color:#267F99;">CorsConfig</span><span style="color:#000000;"> {</span></span>
<span class="line"><span style="color:#000000;">    @</span><span style="color:#267F99;">Bean</span></span>
<span class="line"><span style="color:#000000;">    </span><span style="color:#0000FF;">public</span><span style="color:#000000;"> </span><span style="color:#267F99;">WebMvcConfigurer</span><span style="color:#000000;"> </span><span style="color:#795E26;">corsConfigurer</span><span style="color:#000000;">() {</span></span>
<span class="line"><span style="color:#000000;">        </span><span style="color:#AF00DB;">return</span><span style="color:#000000;"> </span><span style="color:#AF00DB;">new</span><span style="color:#000000;"> </span><span style="color:#795E26;">WebMvcConfigurer</span><span style="color:#000000;">() {</span></span>
<span class="line"><span style="color:#000000;">            @</span><span style="color:#267F99;">Override</span></span>
<span class="line"><span style="color:#000000;">            </span><span style="color:#0000FF;">public</span><span style="color:#000000;"> </span><span style="color:#267F99;">void</span><span style="color:#000000;"> </span><span style="color:#795E26;">addCorsMappings</span><span style="color:#000000;">(</span><span style="color:#267F99;">CorsRegistry</span><span style="color:#000000;"> </span><span style="color:#001080;">registry</span><span style="color:#000000;">) {</span></span>
<span class="line"><span style="color:#000000;">                </span><span style="color:#001080;">registry</span><span style="color:#000000;">.</span><span style="color:#795E26;">addMapping</span><span style="color:#000000;">(</span><span style="color:#A31515;">&quot;/&quot;</span><span style="color:#000000;">)</span></span>
<span class="line"><span style="color:#000000;">                        .</span><span style="color:#795E26;">allowedOrigins</span><span style="color:#000000;">(</span><span style="color:#A31515;">&quot;http://175.24.164.155&quot;</span><span style="color:#000000;">)</span></span>
<span class="line"><span style="color:#000000;">                        .</span><span style="color:#795E26;">allowedOrigins</span><span style="color:#000000;">(</span><span style="color:#A31515;">&quot;http://localhost:5173&quot;</span><span style="color:#000000;">)</span></span>
<span class="line"><span style="color:#000000;">                        .</span><span style="color:#795E26;">allowedMethods</span><span style="color:#000000;">(</span><span style="color:#A31515;">&quot;GET&quot;</span><span style="color:#000000;">, </span><span style="color:#A31515;">&quot;POST&quot;</span><span style="color:#000000;">, </span><span style="color:#A31515;">&quot;PUT&quot;</span><span style="color:#000000;">, </span><span style="color:#A31515;">&quot;DELETE&quot;</span><span style="color:#000000;">)</span></span>
<span class="line"><span style="color:#000000;">                        .</span><span style="color:#795E26;">allowCredentials</span><span style="color:#000000;">(</span><span style="color:#0000FF;">true</span><span style="color:#000000;">)</span></span>
<span class="line"><span style="color:#000000;">                        .</span><span style="color:#795E26;">maxAge</span><span style="color:#000000;">(</span><span style="color:#098658;">3600</span><span style="color:#000000;">);</span></span>
<span class="line"><span style="color:#000000;">            }</span></span>
<span class="line"><span style="color:#000000;">        };</span></span>
<span class="line"><span style="color:#000000;">    }</span></span>
<span class="line"><span style="color:#000000;">}</span></span></code></pre></div><p>Config/SecurityConfiguration</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki material-theme-darker vp-code-dark"><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#C792EA;">Bean</span></span>
<span class="line"><span style="color:#EEFFFF;">    </span><span style="color:#C792EA;">public</span><span style="color:#EEFFFF;"> </span><span style="color:#C792EA;">SecurityFilterChain</span><span style="color:#EEFFFF;"> </span><span style="color:#82AAFF;">filterChain</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">HttpSecurity</span><span style="color:#EEFFFF;"> httpSecurity</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#EEFFFF;">                                           </span><span style="color:#C792EA;">PersistentTokenRepository</span><span style="color:#EEFFFF;"> repository</span><span style="color:#89DDFF;">)</span><span style="color:#EEFFFF;"> throws Exception </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#EEFFFF;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#EEFFFF;"> httpSecurity</span></span>
<span class="line"><span style="color:#EEFFFF;">                </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">authorizeHttpRequests</span><span style="color:#89DDFF;">(</span><span style="color:#EEFFFF;">conf </span><span style="color:#C792EA;">-&gt;</span></span>
<span class="line"><span style="color:#EEFFFF;">                </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">csrf</span><span style="color:#89DDFF;">(</span><span style="color:#EEFFFF;">AbstractHttpConfigurer</span><span style="color:#89DDFF;font-style:italic;">::</span><span style="color:#EEFFFF;">disable</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#EEFFFF;">                </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">cors</span><span style="color:#89DDFF;">(</span><span style="color:#EEFFFF;">conf </span><span style="color:#C792EA;">-&gt;</span><span style="color:#EEFFFF;"> conf</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">configurationSource</span><span style="color:#89DDFF;">(this.</span><span style="color:#82AAFF;">corsConfigurationSource</span><span style="color:#89DDFF;">()))</span></span>
<span class="line"><span style="color:#EEFFFF;">                </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">build</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#EEFFFF;">    }</span></span>
<span class="line"><span style="color:#C792EA;">private</span><span style="color:#EEFFFF;"> </span><span style="color:#C792EA;">CorsConfigurationSource</span><span style="color:#EEFFFF;"> </span><span style="color:#82AAFF;">corsConfigurationSource</span><span style="color:#89DDFF;">()</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#EEFFFF;">        </span><span style="color:#C792EA;">CorsConfiguration</span><span style="color:#EEFFFF;"> cors </span><span style="color:#89DDFF;">=</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#EEFFFF;"> </span><span style="color:#82AAFF;">CorsConfiguration</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#EEFFFF;">        cors</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addAllowedOriginPattern</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://175.24.164.155</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#EEFFFF;">        cors</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addAllowedOriginPattern</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://www.iloveu1314.xyz</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#EEFFFF;">        cors</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addAllowedOriginPattern</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://localhost:5173</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#EEFFFF;">        cors</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setAllowCredentials</span><span style="color:#89DDFF;">(true);</span></span>
<span class="line"><span style="color:#EEFFFF;">        cors</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addAllowedHeader</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">*</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#EEFFFF;">        cors</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addAllowedMethod</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">*</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#EEFFFF;">        cors</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addExposedHeader</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">*</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#EEFFFF;">        </span><span style="color:#C792EA;">UrlBasedCorsConfigurationSource</span><span style="color:#EEFFFF;"> source </span><span style="color:#89DDFF;">=</span><span style="color:#EEFFFF;"> </span><span style="color:#89DDFF;font-style:italic;">new</span><span style="color:#EEFFFF;"> </span><span style="color:#82AAFF;">UrlBasedCorsConfigurationSource</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#EEFFFF;">        source</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">registerCorsConfiguration</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/**</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#EEFFFF;"> cors</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#EEFFFF;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#EEFFFF;"> source</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#EEFFFF;">    </span><span style="color:#89DDFF;">}</span></span></code></pre><pre class="shiki light-plus vp-code-light"><code><span class="line"><span style="color:#000000;">@</span><span style="color:#267F99;">Bean</span></span>
<span class="line"><span style="color:#000000;">    </span><span style="color:#0000FF;">public</span><span style="color:#000000;"> </span><span style="color:#267F99;">SecurityFilterChain</span><span style="color:#000000;"> </span><span style="color:#795E26;">filterChain</span><span style="color:#000000;">(</span><span style="color:#267F99;">HttpSecurity</span><span style="color:#000000;"> httpSecurity,</span></span>
<span class="line"><span style="color:#000000;">                                           </span><span style="color:#267F99;">PersistentTokenRepository</span><span style="color:#000000;"> repository) throws Exception {</span></span>
<span class="line"><span style="color:#000000;">        </span><span style="color:#AF00DB;">return</span><span style="color:#000000;"> httpSecurity</span></span>
<span class="line"><span style="color:#000000;">                .</span><span style="color:#795E26;">authorizeHttpRequests</span><span style="color:#000000;">(conf </span><span style="color:#0000FF;">-&gt;</span></span>
<span class="line"><span style="color:#000000;">                .</span><span style="color:#795E26;">csrf</span><span style="color:#000000;">(AbstractHttpConfigurer</span><span style="color:#AF00DB;">::</span><span style="color:#000000;">disable)</span></span>
<span class="line"><span style="color:#000000;">                .</span><span style="color:#795E26;">cors</span><span style="color:#000000;">(conf </span><span style="color:#0000FF;">-&gt;</span><span style="color:#000000;"> </span><span style="color:#001080;">conf</span><span style="color:#000000;">.</span><span style="color:#795E26;">configurationSource</span><span style="color:#000000;">(</span><span style="color:#0000FF;">this</span><span style="color:#000000;">.</span><span style="color:#795E26;">corsConfigurationSource</span><span style="color:#000000;">()))</span></span>
<span class="line"><span style="color:#000000;">                .</span><span style="color:#795E26;">build</span><span style="color:#000000;">();</span></span>
<span class="line"><span style="color:#000000;">    }</span></span>
<span class="line"><span style="color:#0000FF;">private</span><span style="color:#000000;"> </span><span style="color:#267F99;">CorsConfigurationSource</span><span style="color:#000000;"> </span><span style="color:#795E26;">corsConfigurationSource</span><span style="color:#000000;">() {</span></span>
<span class="line"><span style="color:#000000;">        </span><span style="color:#267F99;">CorsConfiguration</span><span style="color:#000000;"> </span><span style="color:#001080;">cors</span><span style="color:#000000;"> = </span><span style="color:#AF00DB;">new</span><span style="color:#000000;"> </span><span style="color:#795E26;">CorsConfiguration</span><span style="color:#000000;">();</span></span>
<span class="line"><span style="color:#000000;">        </span><span style="color:#001080;">cors</span><span style="color:#000000;">.</span><span style="color:#795E26;">addAllowedOriginPattern</span><span style="color:#000000;">(</span><span style="color:#A31515;">&quot;http://175.24.164.155&quot;</span><span style="color:#000000;">);</span></span>
<span class="line"><span style="color:#000000;">        </span><span style="color:#001080;">cors</span><span style="color:#000000;">.</span><span style="color:#795E26;">addAllowedOriginPattern</span><span style="color:#000000;">(</span><span style="color:#A31515;">&quot;http://www.iloveu1314.xyz&quot;</span><span style="color:#000000;">);</span></span>
<span class="line"><span style="color:#000000;">        </span><span style="color:#001080;">cors</span><span style="color:#000000;">.</span><span style="color:#795E26;">addAllowedOriginPattern</span><span style="color:#000000;">(</span><span style="color:#A31515;">&quot;http://localhost:5173&quot;</span><span style="color:#000000;">);</span></span>
<span class="line"><span style="color:#000000;">        </span><span style="color:#001080;">cors</span><span style="color:#000000;">.</span><span style="color:#795E26;">setAllowCredentials</span><span style="color:#000000;">(</span><span style="color:#0000FF;">true</span><span style="color:#000000;">);</span></span>
<span class="line"><span style="color:#000000;">        </span><span style="color:#001080;">cors</span><span style="color:#000000;">.</span><span style="color:#795E26;">addAllowedHeader</span><span style="color:#000000;">(</span><span style="color:#A31515;">&quot;*&quot;</span><span style="color:#000000;">);</span></span>
<span class="line"><span style="color:#000000;">        </span><span style="color:#001080;">cors</span><span style="color:#000000;">.</span><span style="color:#795E26;">addAllowedMethod</span><span style="color:#000000;">(</span><span style="color:#A31515;">&quot;*&quot;</span><span style="color:#000000;">);</span></span>
<span class="line"><span style="color:#000000;">        </span><span style="color:#001080;">cors</span><span style="color:#000000;">.</span><span style="color:#795E26;">addExposedHeader</span><span style="color:#000000;">(</span><span style="color:#A31515;">&quot;*&quot;</span><span style="color:#000000;">);</span></span>
<span class="line"><span style="color:#000000;">        </span><span style="color:#267F99;">UrlBasedCorsConfigurationSource</span><span style="color:#000000;"> </span><span style="color:#001080;">source</span><span style="color:#000000;"> = </span><span style="color:#AF00DB;">new</span><span style="color:#000000;"> </span><span style="color:#795E26;">UrlBasedCorsConfigurationSource</span><span style="color:#000000;">();</span></span>
<span class="line"><span style="color:#000000;">        </span><span style="color:#001080;">source</span><span style="color:#000000;">.</span><span style="color:#795E26;">registerCorsConfiguration</span><span style="color:#000000;">(</span><span style="color:#A31515;">&quot;/**&quot;</span><span style="color:#000000;">, cors);</span></span>
<span class="line"><span style="color:#000000;">        </span><span style="color:#AF00DB;">return</span><span style="color:#000000;"> source;</span></span>
<span class="line"><span style="color:#000000;">    }</span></span></code></pre></div>`,10),t=[e];function r(c,F,y,i,D,E){return n(),a("div",null,t)}const A=s(p,[["render",r]]);export{d as __pageData,A as default};
